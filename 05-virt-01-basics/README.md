# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."


## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

- В аппаратной виртуализации поддерживается специальная процессорная архитектура, гистевые системы упраляются напрямую. Аппаратная виртуализация обеспечивает производительность, сравнимую с производительностью невиртуализованной машины.

- Виртуализация на основе операционной системы работа нескольких экземпляров пространства пользователя в рамках одной ОС. Примерами могут быть Docker, LXC

- Паравиртуализация, перационная система взаимодействует с программой гипервизора, который предоставляет ей гостевой API, вместо использования напрямую таких ресурсов, как таблица страниц памяти.


## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

    Организация серверов:
    - физические сервера,
    - паравиртуализация,
    - виртуализация уровня ОС.

    Условия использования:
    - Высоконагруженная база данных, чувствительная к отказу.
    - Различные web-приложения.
    - Windows системы для использования бухгалтерским отделом.
    - Системы, выполняющие высокопроизводительные расчеты на GPU.

    Опишите, почему вы выбрали к каждому целевому использованию такую организацию.  

- Высоконагруженная база данных, чувствительная к отказу.  
    - виртуализация уровня ОС  
    Виртуаьные сервера проще и быстрее админестрировать, проще обеспечить резервное копирование и востановление бекапов.

- Различные web-приложения.
    - виртуализация уровня ОС
    Веб приложения, к примеру на `LAMP` не прохо себя чувствую на контейнерах, например Docker.

- Windows системы для использования бухгалтерским отделом.
    - виртуализация уровня ОС  
    Разного рода Windows системы не плохо себя чуствуют на виртуализации Hyper-V, а где бухгалтерия так и 1С с MSSQL  

- Системы, выполняющие высокопроизводительные расчеты на GPU.  
    - паравиртуализация
    Так-как её вычеслительная пощьность сравнима с физическим железом.  


## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований.  

    Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.  
    VMware ESXi - Собирается в кластер, поддердживает всех изместных программных и аппаратных вендоров. имеет расширяемые, через лицензии, возможности.  

2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.  

    Таким решением может стать Proxmox, так-как он бесплатен и под капотом имеет хороший гипервизор KVM, есть не плохой web-интерфейс управления и есть возможность собирать кластер. Может стать отличным решением для польшенства проектов виртуализации. 

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.  

    Windows Server Core с Hyper-V куда лучше поднодит для виртуализации собственных продуктов.  
    Или решение от Open Source "Proxmox".   

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.  

    `Vagrant + VirtualBox` на локальной машине вполне пригодня для тестирования.  


## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

При использовании гетерогенной среды виртуализации необходимо знать какждую из них на достатачном уровне чтобы уверенно выполнять те или иные действя с виртуальными машинами.
Верояно потребуется поддерживать ПО гипервизова в актуальном состоянии и выполнять обновления, может повлиять на работу в плоть до не способности загружаться.
Необходимо иметь 2 стенда для проверки обновлений и в целом всевозможнох манипуляций с работой на том или ином гипервизоре.
гетерогенную среду я бы не создал, при идиальных условиях. А в реалиях она существует и содержать такую среду есть необходимость, к примеру продукты от microfoft: exchange server, mssql server и т.д.
А для тестового стенда можно использовать и Open source решения такие как Virtual Box, Proxmox и т.д. 

---

# Доработка

Задание 1
В чём разница при работе с ядром гостевой ОС для полной и паравиртуализации?

Для паравиртуализации требуется модификация ядра гостевой ОС,  
а для полной виртуализации такой модификации не требуется.


Задание 2  
2.1 Контейнеры не очень хорошо использовать для БД. Как думаете, почему?  

Я понимаю что, в контейнере будет работать только сама субд а, фалы базы в контейнере держать не надо, для этого используется тома `volumes`, а дирректория примонтированная в контейнере храниться на хостовой машине и может быть примонтирована из сетевого хранилища. 
Хранить базу данных внутри контейнера не хорошо потому что при перезапуске там не останется данных. 

Пример volumes из docker-compose.yml   
```yaml
  db:
    container_name: mysite-db
    restart: always
    image: mysql:8.0
    volumes:
      - ./volumes/mysite_db:/var/lib/mysql
```
